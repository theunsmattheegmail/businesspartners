import { ODataMetadata } from '../data/metadata';
import { SimpleResponse } from '../batch/http/simpleHttpResponse';
import { Response } from 'express';
import { ExecutionError, ODataRequestInterface } from '../data/common';
export interface DataQuery {
    list: boolean;
    queryPath: QueryPath[];
    rawParams: object;
    properties: object;
    orderBy: OrderByDefinition[];
    searchQuery: string[];
    expand: object;
    format: string;
    aggregateDefinition: AggregateDefinition;
    filter: any;
    startIndex?: number;
    maxElements?: number;
}
declare type OrderByDefinition = {
    name: string;
    direction: 'asc' | 'desc';
};
declare type AggregateDefinition = {
    filter: any;
    groupBy: string[];
    aggregates: AggregateProperty[];
};
declare type AggregateProperty = {
    name: string;
    operator: string;
    sourceProperty: string;
};
export declare type QueryPath = {
    path: string;
    keys: Record<string, any>;
};
export declare type ErrorInformation = {
    statusCode: number;
    message?: string;
    data?: object;
};
/**
 * Abstract class representing an OData request
 */
export declare abstract class ODataRequest implements ODataRequestInterface {
    query: DataQuery;
    readonly baseUrl: string;
    readonly tenantId: string;
    dataLength: number;
    protected metadata: ODataMetadata;
    protected headers: any;
    /**
     * @param baseUrl
     * @param url
     * @param metadata
     */
    constructor(baseUrl: string, url: string, metadata: ODataMetadata);
    /**
     * @param headerName
     * @param headerValue
     */
    setResponseHeader(headerName: string, headerValue: any): void;
    /**
     * @param res
     */
    applyResponseHeaders(res: Response): void;
    /**
     * @param path
     */
    private parsePath;
    /**
     * Version specific parsing of the input url
     *
     * @param path
     * @param params
     */
    protected parseUrl(path: string, params: object): DataQuery;
    /**
     * @param filterParams
     */
    protected parseFilter(filterParams: string): any;
    protected abstract parseExpand(expandParameters: string): Partial<DataQuery>;
    /**
     * @param orderByParameters
     */
    protected parseOrderBy(orderByParameters: string): OrderByDefinition[];
    /**
     * @param applyParameters
     */
    protected parseApply(applyParameters: string): AggregateDefinition;
    /**
     * @param aggregationDefinition
     */
    protected parseAggregateDefinition(aggregationDefinition: string): AggregateProperty[];
    protected abstract toJSON(data: object | object[]): string;
    /**
     * @param entity
     * @param element
     */
    protected enrichElement(entity: string, element: object): void;
    /**
     * @param errorInformation
     */
    static createErrorResponse(errorInformation: ExecutionError): SimpleResponse;
    /**
     * @param data
     * @param bCreated
     * @param key
     */
    createResponse(data: any, bCreated?: boolean, key?: string): SimpleResponse;
}
export {};
